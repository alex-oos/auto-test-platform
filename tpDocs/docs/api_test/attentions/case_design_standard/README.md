# 用例设计规范

## 目标
- **测试环境交付检验**
  - 目前测试环境交付测试团队后仍存在大量阻塞问题
  - 需要提供方法对开发交付的测试环境进行快速检验
  - 测试环境检验测试仅校验核心接口正向用例连通性，服务内部逻辑是否正确不做检查
- **实现线上业务功能巡检**
  - 每日构建、维护，全量执行。（多次）
- **冒烟测试**
  - 核心接口正向用例通过、场景测试通过

## 设计原则
- 所有测试操作的数据尽量自己构造，避免因空环境无数据导致测试无法通过 
- 各组独自完成自己部门相关的数据构造设计 
- 如需数据尽量先获取或构造

## 实现方案
### 1. 分级保障
测试用例设计分级：
- setup/teardown：该类型测试用例不会单独执行，仅在被前后置调用时执行
- P0：核心接口正向用例
- P1：主要场景测试
- P2：核心接口异常用例
- P3：非核心接口用例

::: warning 注意
1. P0和P1级别的测试用例需确保通过，P2和P3级用例为可选执行。
2. 优先设计P0用例，P0中又可以优先考虑接口覆盖率，推动覆盖率达到100%，再考虑用例设计覆盖全面性
:::


### 2. 分级运行
- 测试平台支持自定义校验规则
- 定义测试任务
  - 测试环境校验
    - P0
    - 仅校验状态码200。（或可加上response.data.code）
    - 执行时选择测试环境
  - 线上环境巡检 - 每日构建
    - P0 + P1 + P2 + P3
    - 全部校验（状态码、数据响应）
  - 冒烟测试
    - P0 + P1
    - 全部校验（状态码、数据响应）

### 3. 变更接口选择性执行
对于存在更新且未对用例进行维护的接口，进行选择性执行：
- 场景测试：遇到有更新待处理的接口请求步骤，停止测试，标记用例失败
- 非场景测试：遇到有更新待处理的接口请求步骤，继续测试，如步骤失败，continue(标记步骤失败并继续后续步骤执行)

